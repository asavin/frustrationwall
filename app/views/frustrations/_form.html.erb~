<%= simple_form_for(@frustration, :html => {:class => 'form-horizontal' }) do |f| %>
  <%= f.text_area :content, :maxlength => 400, :rows => 7, :placeholder => 'What happened today?' %>
  
  <div class="actions">
    <%= f.button :submit, :disable_with => 'Saving...', :class => 'btn btn-danger' %>
  </div>
<% end %>

<script>
$( function() {
    var characterlimit = 400;
    $("#frustration_content").after( "<span class=\"characters_left\"></span>" ).next().hide().end()

    // fire an event each time a key is pressed inside the textarea
    .keypress( function( e ){
      // get current character count
      var current = $( this ).val().length;
 
      // if current character count is greater than or equal to the character limit
      if( current >= characterlimit ){
        // prevent further characters from being entered apart from the 
        // Delete and Backspace keys
        if( e.which != 0 && e.which != 8 ) e.preventDefault();
      }
 
      // add the remaining character count to our span
      $( this ).next().show().text( characterlimit - current );
        }
    );
});
</script>

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Frustration Wall</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
    <!-- Displaying notifications if any -->
    <div id="overlay_container">
    <% flash.each do |key, value| %>
        <%= content_tag :div, value, :class => ["overlay_content"] %>
        <%= content_tag :script, :type => "text/javascript" do -%>
            setTimeout(function(){ $(".overlay_content").fadeOut("slow")
            }, 4000);
        <% end %>
    <% end %>
    </div>
    <div id="wrap">
        <header>
            <div class="navbar">
              <div class="navbar-inner">
                <a class="brand" href="/">Home</a>
                <% unless current_user.nil? %>
                    <div class="progress" id="super-progress-bar">
                      <% if current_user.level < 34 %>
                        <div class="bar bar-success" id="green-progress-bar-part" style="width: <%= current_user.level %>%;"></div>
                        <div class="bar bar-warning" id="yellow-progress-bar-part" style="width: 0%;"></div>
                        <div class="bar bar-danger" id="red-progress-bar-part" style="width: 0%;"></div>
                      <% elsif current_user.level < 64 %>
                            <div class="bar bar-success" id="green-progress-bar-part" style="width: 33%;"></div>
                            <div class="bar bar-warning" id="yellow-progress-bar-part" style="width: <%= current_user.level - 33 %>%;"></div>
                            <div class="bar bar-danger" id="red-progress-bar-part" style="width: 0%;"></div>
                      <% else %>
                        <div class="bar bar-success" id="green-progress-bar-part" style="width: 33%;"></div>
                            <div class="bar bar-warning" id="yellow-progress-bar-part" style="width: 33%;"></div>
                            <div class="bar bar-danger" id="red-progress-bar-part" style="width: <%= current_user.level - 66 %>%;"></div>
                      <% end %> 
                      
                    </div>
                    <button class="btn btn-danger" id="big-red-button">Big Red Button</button>
                <% end %>
                <ul class="nav pull-right">
                    <% if user_signed_in? %>
                        <li><%= link_to 'Profile', edit_user_registration_path %></li>
                        <li><%= link_to "Logout", destroy_user_session_path, method: :delete %></li>
                    <% else %>
                        <li><%= link_to "Register", new_user_registration_path %></li>
                        <li><%= link_to "Login", new_user_session_path %></li>
                    <% end %>
                </ul>
              </div>
            </div>
        </header>
        <a href="#">
            <div id="scroll-up">
                Go Up
            </div>
        </a>
        <div class="container">
            <div class="jumbotron ribbon-wrapper">
                <div class="ribbon-wrapper-green"><div class="ribbon-green">BETA</div>
                    
                </div>
                <h1 class="main-title">Frustration Wall</h1>
                    <p class="lead">You always wanted this</p>
                    <div id="new_frustration_form">
                        <%= render 'frustrations/form' %>
                    </div>
                    <a href='#' class='button-blue' id="toggle-frustration-form">Add one</a>
            </div>
            <hr />
            <div class="container">
                <%= yield %>
            </div>
        </div>
        <div id="push"></div>
    </div>
    <div id="footer">
        <div class="container">
            Boogie Software, bringing love to the world. From Finland.
        </div>
    </div>
    <script>
        $('#toggle-frustration-form').click(function(){
            
            var txt = $("#new_frustration_form").is(':visible') ? 'Add one' : 'Maybe not';
            $("#toggle-frustration-form").text(txt);
            $('#new_frustration_form').slideToggle();
        });
        
        <% if user_signed_in? %>
            <% if current_user.level >= 100 %>
                $('#big-red-button').show();
            <% end %>
            
            $('#big-red-button').click(function(){
                $('body').addClass('shaky');
            });
        <% end %>
    </script>
</body>
</html>
